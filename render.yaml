services:
  # Backend API Service (PHP with Docker)
  - type: web
    name: strangerthings-api
    runtime: docker
    plan: free
    dockerContext: .
    dockerfilePath: ./Dockerfile
    healthCheckPath: /api/events/read.php
    envVars:
      - key: DB_HOST
        value: localhost
      - key: DB_NAME
        value: stranger_things_db
      - key: DB_USER
        value: root
      - key: DB_PASSWORD
        value: ""
      - key: DB_PORT
        value: 5432

  # Frontend Service (React)
  - type: web
    name: strangerthings-frontend
    runtime: node
    plan: free
    buildCommand: "npm run build"
    startCommand: "npm run preview"
    healthCheckPath: /
    envVars:
      - key: VITE_API_URL
        value: https://strangerthings-api.onrender.com
    staticPublishPath: dist
